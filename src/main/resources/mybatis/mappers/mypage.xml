<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
						
<mapper namespace="com.kosta.clothes.dao.MypageDAO">
	<select id="getSellList" parameterType="map" resultType="Sell">
		<![CDATA[
			SELECT * FROM 
			(SELECT ROW_NUMBER() OVER (ORDER BY ino desc) num, i.* FROM INDIVIDUAL i WHERE userno=#{userno})
			WHERE num BETWEEN #{row} AND #{row}+9
		]]>
	</select>
	

	<select id="getSharingList" parameterType="map" resultType="Sharing">
		<![CDATA[
			SELECT * FROM 
			(SELECT ROW_NUMBER() OVER (ORDER BY sno desc) num, s.* FROM sharing s WHERE userno=#{userno})
			WHERE num BETWEEN #{row} AND #{row}+9
		]]>
	</select>
	
	<select id="getSellapplylist" parameterType="Integer" resultType="users">
		<![CDATA[
			SELECT u.nickname, to_char(w.regdate,'YY-MM-DD HH24:MI:SS') as joinDate FROM wapply w, users u WHERE ino = #{ino} and wuserNo = u.userNo
		]]>
	</select>
	
	<select id="getSharingapplylist" parameterType="Integer" resultType="users">
		<![CDATA[
			SELECT u.nickname, to_char(w.regdate,'YY-MM-DD HH24:MI:SS') as joinDate FROM wapply w, users u WHERE sno = #{sno} and wuserNo = u.userNo
		]]>
	</select>

	<insert id="uintroduce" parameterType="map">
		<![CDATA[
			update users set
			introduce = #{introduce} where userno = #{userno}
		]]>
		</insert>
		
		<select id="uintromyself" parameterType="Integer" resultType="String">
		<![CDATA[
			SELECT INTRODUCE FROM USERS WHERE userno=#{userno}

		]]>
	</select>
	
	<select id="getMypage" parameterType="Integer" resultType="users">
		<![CDATA[
			SELECT * FROM USERS WHERE userno=#{userno}

		]]>
	</select>
	
	<select id="sellListCount" resultType="Integer">
		<![CDATA[
			SELECT count(*) FROM individual where userno = #{userno}
    
		]]>
	</select>
	
	<select id="sharingListCount" resultType="Integer">
		<![CDATA[
			SELECT count(*) FROM sharing where userno = #{userno}

		]]>
	</select>
</mapper>	