<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
						
<mapper namespace="com.kosta.clothes.dao.UsersDAO">
	<!--회원가입 정보등록 -->
	<insert id="insertUsers">
		<selectKey keyProperty="id" resultType="Long" order="BEFORE">
			<![CDATA[
				select users_seq.nextval from dual
			]]>
		</selectKey>
		
		<![CDATA[
			insert into users(
					id,
					email,
					name,
					password,
					sect,
					bno,
					joindate)
					values(
					#{id},
					#{email},
					#{name},
					#{password},
					#{sect},
					1,
					sysdate)
					
		]]>
	</insert>
	
	
	<!--닉네임 중복체크 -->
	<select id="selectName" parameterType="String" resultType="com.kosta.clothes.bean.Users">
		<![CDATA[
			SELECT * 
			FROM users 
			WHERE name=#{checknick}
		]]>
	</select>

	<!--이메일 중복체크 -->
	<select id="selectEmail" parameterType="String" resultType="com.kosta.clothes.bean.Users">
		<![CDATA[
			SELECT * 
			FROM users 
			WHERE email=#{checkemail}
		]]>
	</select>
	
	<!--로그인 -->
	<select id="selectAccount" parameterType="map" resultType="Users">
		<![CDATA[
			SELECT *
			FROM users 
			WHERE email=#{email} and password=#{password}
		]]>
	</select>
	
</mapper>

















